services:
  ai-government:
    build: .
    init: true
    environment:
      - GH_TOKEN
      - REPO_URL=${REPO_URL:-https://github.com/vindl/ai-government.git}
      - REPO_BRANCH=${REPO_BRANCH:-main}
      - LOOP_MAX_CYCLES
      - LOOP_COOLDOWN
      - LOOP_PROPOSALS
      - LOOP_MODEL
      - LOOP_MAX_PR_ROUNDS
      - LOOP_DRY_RUN
      - LOOP_SKIP_ANALYSIS
      - LOOP_SKIP_IMPROVE
      - LOOP_VERBOSE
      - TWITTER_CONSUMER_KEY
      - TWITTER_CONSUMER_SECRET
      - TWITTER_ACCESS_TOKEN
      - TWITTER_ACCESS_TOKEN_SECRET
    volumes:
      - ~/.claude:/home/aigov/.claude
    deploy:
      resources:
        limits:
          cpus: "4"
          memory: 8G
    restart: unless-stopped
    logging:
      driver: json-file
      options:
        max-size: "50m"
        max-file: "5"
